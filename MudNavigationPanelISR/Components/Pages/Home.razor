@page "/"
@inject IConfiguration _configuration

@using ErgodicMage.MudNavigationPanelISR.Authentication

<PageHeader DisplayText="ErgodicMage Home Navigation Panel" Title="Home" />

<MudNavigationPanel 
    CardSettings=@navigationCardSettings 
    BackgroundColor=@backgroundColor 
    CardBackgroundColor=@cardBackgroundColor 
    CardHeight=@cardHeight 
    CardWidth=@cardWidth 
    CardTitleColor=@titleColor 
    CardIconColor=iconColor 
    CardIconSize=iconSize
    UseAuthorization=@useAuthentication/>

@code{
    string backgroundColor =  Colors.Indigo.Lighten5;
    string cardBackgroundColor =  Colors.Teal.Lighten5;
    string cardHeight = "200px";
    string cardWidth = "200px";
    Color titleColor = Color.Default;
    Color iconColor = Color.Default;
    Size iconSize = Size.Large;
    bool useAuthentication;

    // Could move these to a configuration file.
    MudNavigationCardSettings[]? navigationCardSettings; // = new();

    protected override void OnInitialized()
    {
        useAuthentication =  _configuration.GetValue<bool>("UseAuthentication");

        if (useAuthentication)
        {
            navigationCardSettings = new MudNavigationCardSettings[]
            {
                new(){Title="Login", Icon=Icons.Material.Filled.Login, Href="login", Role=NavigationRoles.Anonymous},
                new(){Title="Logout", Icon=Icons.Material.TwoTone.Logout, Href="logout", Role=NavigationRoles.AuthRoles},
                new(){Title="Counter", Icon=Icons.Material.Filled.Add, Href="counter", Role=NavigationRoles.AllRoles},
                new(){Title="Weather", Icon=Icons.Material.Filled.List, Href="weather", Role=NavigationRoles.AllRoles},
                new(){Title="Edit User", Icon=Icons.Material.Filled.VerifiedUser, Href="user", Role=NavigationRoles.AuthRoles},
                new(){Title="Administration", Icon=Icons.Material.TwoTone.AdminPanelSettings, Href="administration", Role=NavigationRoles.Admin}
            };
        }
        else
        {
            navigationCardSettings = new MudNavigationCardSettings[]
            {
                new(){Title="Counter", Icon=Icons.Material.Filled.Add, Href="counter"},
                new(){Title="Weather", Icon=Icons.Material.Filled.List, Href="weather"}
            };
        }
    }
}